keys
  main auto double int struct break else long switch
  case enum register typedef char extern return union
  continue for signed void do if static while
  default goto sizeof volatile const float short unsigned
end keys

define constant_type
    'const
end define

define signed_modifier
    'signed
  | 'unsigned
end define

define long_modifier
    'long
  | 'short
end define

define type
    [signed_modifier]
  | [opt signed_modifier] [repeat long_modifier] 'int
  | [opt signed_modifier] 'char
  | 'float
  | 'double
  | 'long 'double
  | 'void
  | [constant_type] [type]
end define

define variable
    [id]
  | [mem_op] [id]
end define

define expression
    [variable]
  | [number]
  | [stringlit]
  | [charlit]
  | [sign] [expression]
  | '([expression]')
  | [expression] [arithmetic_op] [expression]
end define

define and_or
    '&&
  | '||
end define

define condition
    [expression]
  | [expression] [compare_op] [expression]
  | '([expression] [compare_op] [expression]')
  | [condition] [and_or] [condition]
  | '![condition]
end define

define declaration
    [type] [list variable]
end define

define assignment
    [variable] [assign_op] [expression]
  | [variable] [plus_minus_op]
  | [plus_minus_op] [variable]
  | [type] [assignment]
end define

define function_call
    [variable]'([list expression]')
end define

define func
    [type] [variable]'([repeat declaration]') '{
      [repeat block]
    '}
end define

define statement
    [declaration]';
  | [assignment]';
  | [function_call]';
  | 'return [opt expression]';
  | 'continue;
  | 'break;
end define

define block
    [statement]
  | [func]
  | [if_struct]
  | [loop_struct]
  | [switch_struct]
end define

define conditional
    'if '([condition]')
  | 'else
  | 'else if '([condition]')
end define

define loop
    'for '([opt assignment]'; [opt condition]'; [opt assignment]')
  | 'while '([condition]')
end define

define switch_statement
    'switch '([condition]')
end define

define switch_case
    'case [expression]':
      [repeat statement]
  | 'default:
      [repeat statement]
end define

define if_struct
    [conditional]
      [statement]
  | [conditional] '{
      [repeat block]
    '}
end define

define loop_struct
    [loop]
      [statement]
  | [loop] '{
      [repeat block]
    '}
  | 'do '{
      [repeat block]
    '} 'while '([condition]');
end define

define switch_struct
    [switch_statement] '{
      [repeat switch_case]
    '}
end define

define body
  int main() '{
    [repeat block]
  '}
end define
